<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>GISMA Panel</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

/* –®—Ä–∏—Ñ—Ç –∏ –æ–±—â–∏–π —Å—Ç–∏–ª—å */

body { font-family: 'Inter', sans-serif; font-size: 14px; }
.label { font-weight: 500; color: var(--muted); }
.value { font-weight: 400; color: var(--text); }
.meta { font-weight: 500; }

.panel{
  background: linear-gradient(145deg, #0f1420, #151c2e);
  border: 1px solid rgba(63,169,245,0.18);
  border-radius: 18px;
  overflow: hidden;
  box-shadow:
    0 20px 60px rgba(0,0,0,.45),
    0 0 25px rgba(63,169,245,0.05);
  backdrop-filter: blur(6px);
  transition: all .25s ease;
}

/* –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ */
.danger-btn {
    background: linear-gradient(135deg, #ff4d4d, #ff6b6b);
    border: none;
    padding: 12px 22px;
    border-radius: 14px;
    color: white;
    font-size: 15px;
    cursor: pointer;
    transition: 0.3s ease;
    box-shadow: 0 5px 20px rgba(255, 77, 77, 0.4);
}

.danger-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 77, 77, 0.6);
}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(10, 10, 20, 0.7);
    backdrop-filter: blur(6px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.modal-box {
    background: #111827;
    padding: 25px;
    border-radius: 18px;
    text-align: center;
    width: 320px;
    color: white;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    animation: fadeIn 0.2s ease;
}

.modal-buttons {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    justify-content: center;
}

.modal-buttons button {
    padding: 10px 18px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-size: 14px;
}

#cancelClear {
    background: #374151;
    color: white;
}

.danger {
    background: #ff4d4d;
    color: white;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

:root{
--bg:#0a0d12;--panel:#0f1420;--border:#1b2333;
--text:#e6e9ef;--muted:#8b93a7;
--accent:#3fa9f5;--accent-soft:rgba(63,169,245,.12)
}
.light{
--bg:#f2f4f8;--panel:#fff;--border:#d7dbe5;
--text:#1a1d24;--muted:#6b7280;
--accent:#2563eb;--accent-soft:rgba(37,99,235,.12)
}
*{box-sizing:border-box}
body{
margin:0;background:var(--bg);color:var(--text);
font-family:Inter,system-ui,sans-serif
}
.wrapper{max-width:1000px;margin:30px auto;padding:20px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.title{font-size:26px;font-weight:600}
.subtitle{font-size:13px;color:var(--muted)}
.toggle{
padding:7px 14px;border-radius:8px;
border:1px solid var(--border);
background:var(--panel);color:var(--text);cursor:pointer
}

.header {
  display: flex;
  gap: 20px; /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ç–æ –∏ –º–µ—Ç–∞ */
  padding: 22px;
  border-bottom: 1px solid var(--border);
  align-items: center;
  justify-content: flex-start;
}

/* —Å–∞–º –±–ª–æ–∫ —Ñ–æ—Ç–æ */
.photo-box {
  width: 120px;
  height: 120px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--border);
  background: var(--panel);
  cursor: pointer;
  flex-shrink: 0; /* –Ω–µ —Å–∂–∏–º–∞—Ç—å –±–ª–æ–∫ */
}

/* === CYBER OSINT PHOTO STYLE === */
.photo-gallery{
display:flex;
gap:18px;
flex-wrap:wrap;
}

.meta{
font-size:13px;
color:var(--muted);
line-height:1.8;
background:rgba(0,0,0,0.15);
padding:14px 18px;
border-radius:12px;
border:1px solid var(--border);
min-width:180px;
backdrop-filter: blur(6px);
}

/* –ù–µ–æ–Ω–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è */
.photo-box::before{
content:"";
position:absolute;
inset:-2px;
border-radius:20px;
padding:2px;
background:linear-gradient(45deg,#3fa9f5,#00f0ff,#3fa9f5);
background-size:300% 300%;
animation:cyberGlow 6s linear infinite;
-webkit-mask:
linear-gradient(#000 0 0) content-box,
linear-gradient(#000 0 0);
-webkit-mask-composite:xor;
mask-composite:exclude;
pointer-events:none;
}

@keyframes cyberGlow{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

@keyframes scan{
0%{top:0}
100%{top:100%}
}

.photo-box{
  width:130px;
  height:130px;
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  position:relative;
  border:1px solid rgba(63,169,245,.3);
  background:#0b111a;
}
.photo-box img{
  width:100%;
  height:100%;
  object-fit:cover;
  position:relative;
}
.photo-placeholder{
  display:flex;
  align-items:center;
  justify-content:center;
  height:100%;
  font-size:12px;
  color:var(--muted);
  letter-spacing:1px;
}

.photo-placeholder{
display:flex;
align-items:center;
justify-content:center;
height:100%;
font-size:12px;
color:var(--muted);
letter-spacing:1px;
}
.field{
  display:flex;
  align-items:center;
  padding:12px;
  border-bottom:1px solid rgba(255,255,255,0.04);
  transition: all .2s ease;
  border-radius:10px;
}

.field:hover{
  background: rgba(63,169,245,0.08);
  transform: translateX(3px);
}

.value{
  flex:1;
  font-size:14px;
  outline:none;
  line-height:1.5;
}

.label{
  width:220px;
  color:#9aa4b2;
  font-size:13px;
  font-weight:500;
}

.action{
color:var(--muted);cursor:pointer;font-size:14px
}
.action:hover{color:var(--accent)}
.controls,.export{
display:flex;gap:10px;margin-top:14px;flex-wrap:wrap
}
.controls input{
flex:1;min-width:160px;
background:var(--bg);border:1px solid var(--border);
color:var(--text);padding:8px 10px;border-radius:8px
}
.controls button, .toggle, .export button {
  transition: all 0.2s ease;
}

.section { margin-bottom: 24px; }

.controls button:hover, .toggle:hover, .export button:hover {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.about{
font-size:13px;line-height:1.7;color:var(--muted)
}
.footer{
padding:14px 22px;border-top:1px solid var(--border);
font-size:12px;color:var(--muted);
display:flex;justify-content:space-between
}
.footer span{color:var(--accent)}
.dragging{opacity:.5}
.readonly .controls,
.readonly .action,
.readonly .photo-box{display:none}
.readonly .value{pointer-events:none}

.proTabBtn{
  width:100%;
  background:transparent;
  border:1px solid rgba(255,255,255,0.08);
  color:#cbd5e1;
  padding:10px;
  border-radius:10px;
  margin-bottom:8px;
  cursor:pointer;
  text-align:left;
  transition:0.2s;
}

.proTabBtn:hover{
  background:rgba(63,169,245,0.15);
  color:#ffffff;
}

.proActionBtn{
  background:linear-gradient(135deg,#3fa9f5,#2563eb);
  border:none;
  color:white;
  padding:10px 18px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600;
}

body{
  background: radial-gradient(circle at top, #0b1020, #05070f);
  font-family: 'Inter', sans-serif;
  color: #dbe6f5;
}

/* –ü–ª–∞–≤–Ω–æ—Å—Ç—å –≤—Å–µ–π –ø–∞–Ω–µ–ª–∏ */
*{
  transition: all 0.25s ease;
}

/* PRO –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é */
.proTabBtn{
  width:100%;
  background: rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.08);
  color:#cbd5e1;
  padding:12px;
  border-radius:12px;
  margin-bottom:10px;
  cursor:pointer;
  text-align:left;
  font-weight:500;
}

.proTabBtn:hover{
  background: rgba(63,169,245,0.15);
  border:1px solid rgba(63,169,245,0.35);
  color:#ffffff;
  transform: translateX(3px);
}

/* –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ */
.activeProBtn{
  background: linear-gradient(135deg,#3fa9f5,#2563eb);
  color:white !important;
  border: none !important;
  box-shadow: 0 5px 20px rgba(63,169,245,0.4);
}

/* PRO –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
#proLayout{
  animation: fadeIn 0.4s ease;
}

.proTab{
  background: rgba(15,20,35,0.7);
  padding:20px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,0.06);
  box-shadow: 0 10px 40px rgba(0,0,0,0.4);
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}
</style>
</head>

<body>

<!-- –°–ö–†–´–¢–û–ï –ú–ï–ù–Æ –í–õ–ê–î–ï–õ–¨–¶–ê -->
<div id="ownerModal" style="
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.65);
  backdrop-filter: blur(6px);
  z-index:9999;
  align-items:center;
  justify-content:center;
">
  <div style="
    background: linear-gradient(145deg, #0f1420, #141a2b);
    border:1px solid rgba(63,169,245,0.35);
    border-radius:16px;
    padding:24px;
    width:320px;
    text-align:center;
    font-family:'Inter', sans-serif;
    box-shadow:0 20px 60px rgba(0,0,0,0.5);
  ">
    <div style="font-size:18px; font-weight:700; margin-bottom:6px; color:#d0e1f5;">
      –†–µ–∂–∏–º –≤–ª–∞–¥–µ–ª—å—Ü–∞
    </div>

    <div style="font-size:13px; color:#9fb3c8; margin-bottom:16px;">
      –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–∫—Ä—ã—Ç–æ–π –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    </div>

    <input id="ownerCode" placeholder="–ö–æ–¥ –≤–ª–∞–¥–µ–ª—å—Ü–∞" style="
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(63,169,245,0.3);
      background:#0b0f18;
      color:#d0e1f5;
      margin-bottom:12px;
      outline:none;
    ">

    <div id="ownerStatus" style="font-size:12px; margin-bottom:10px; color:#ef4444;"></div>

    <button onclick="loginOwner()" style="
      width:100%;
      padding:10px;
      border:none;
      border-radius:10px;
      background:linear-gradient(90deg,#3fa9f5,#2563eb);
      color:white;
      font-weight:600;
      cursor:pointer;
    ">
      –í–æ–π—Ç–∏ –∫–∞–∫ –≤–ª–∞–¥–µ–ª–µ—Ü
    </button>

    <button onclick="closeOwnerLogin()" style="
      margin-top:10px;
      background:transparent;
      border:none;
      color:#9fb3c8;
      cursor:pointer;
      font-size:12px;
    ">
      –û—Ç–º–µ–Ω–∞
    </button>
  </div>
</div>

<div id="authScreen" style="
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background: radial-gradient(circle at top, #0f1724, #05070c);
  font-family:'Inter', sans-serif;
">

  <div style="
    width:340px;
    background: rgba(15,20,32,0.95);
    border:1px solid rgba(63,169,245,0.25);
    border-radius:18px;
    padding:28px;
    box-shadow:0 20px 60px rgba(0,0,0,0.6);
    backdrop-filter: blur(10px);
  ">

    <div style="
      font-size:22px;
      font-weight:600;
      margin-bottom:6px;
      text-align:center;
      color:#e6e9ef;
    ">
      –î–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏
    </div>

    <div style="
      font-size:13px;
      color:#8b93a7;
      text-align:center;
      margin-bottom:20px;
    ">
      –≤–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
    </div>

    <input id="authLogin" placeholder="–ù–∏–∫" style="
      width:100%;
      margin-bottom:10px;
      padding:10px;
      border-radius:10px;
      border:1px solid #1b2333;
      background:#0a0d12;
      color:#e6e9ef;
      outline:none;
    ">

    <input id="authPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="
      width:100%;
      margin-bottom:16px;
      padding:10px;
      border-radius:10px;
      border:1px solid #1b2333;
      background:#0a0d12;
      color:#e6e9ef;
      outline:none;
    ">

    <button onclick="loginUser()" style="
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(63,169,245,0.4);
      background:rgba(63,169,245,0.1);
      color:#e6e9ef;
      font-weight:500;
      cursor:pointer;
      margin-bottom:10px;
    ">
      –í–æ–π—Ç–∏
    </button>

    <button onclick="registerUser()" style="
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid #1b2333;
      background:#0f1420;
      color:#8b93a7;
      cursor:pointer;
    ">
      –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    </button>

    <div id="authStatus" style="
      font-size:12px;
      margin-top:12px;
      text-align:center;
      color:#facc15;
    "></div>

<div style="margin-top:10px; text-align:center;">
  <button onclick="openOwnerLogin()" style="
    background: transparent;
    border: 1px solid rgba(63,169,245,0.4);
    color:#9fb3c8;
    padding:8px 14px;
    border-radius:10px;
    font-size:12px;
    cursor:pointer;
  ">
    –í—Ö–æ–¥ –≤–ª–∞–¥–µ–ª—å—Ü–∞
  </button>
</div>

  </div>
</div>

<div id="app" style="display:none;">
<div class="wrapper">
<!-- === –õ–ò–¶–ï–ù–ó–ò–Ø GISMA === -->
<div id="licenseBox" style="
  background: linear-gradient(145deg,#121a2b,#0e1422);
  border:1px solid rgba(63,169,245,0.25);
  border-radius:16px;
  padding:18px;
  margin-bottom:20px;
  box-shadow:0 15px 40px rgba(0,0,0,0.4);
  font-family:'Inter', sans-serif;
">

  <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;">
    <div>
      <div style="font-size:16px;font-weight:600;color:#dbe6f5;">
        –õ–∏—Ü–µ–Ω–∑–∏—è GISMA
      </div>
      <div id="licenseStatus" style="font-size:13px;color:#facc15;margin-top:4px;">
        FREE –≤–µ—Ä—Å–∏—è ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
      </div>
    </div>

    <div style="display:flex;gap:10px;margin-top:10px;">
      <button onclick="buyPro()" style="
        background:linear-gradient(135deg,#3fa9f5,#2563eb);
        border:none;
        color:white;
        padding:8px 14px;
        border-radius:10px;
        cursor:pointer;
      ">
        üíé –ö—É–ø–∏—Ç—å PRO
      </button>

      <button onclick="enterLicense()" style="
        background:transparent;
        border:1px solid rgba(255,255,255,0.2);
        color:#cfd9e6;
        padding:8px 14px;
        border-radius:10px;
        cursor:pointer;
      ">
        üîë –í–≤–µ—Å—Ç–∏ –∫–ª—é—á
      </button>
      <button onclick="exitProMode()" style="
  background:#ef4444;
  border:none;
  color:white;
  padding:8px 14px;
  border-radius:10px;
  cursor:pointer;
">
  üö™ –í—ã–π—Ç–∏ –∏–∑ PRO
</button>
    </div>
  </div>
  <!-- === PRO –ú–ï–ù–Æ (—Å–∫—Ä—ã—Ç–æ –¥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ PRO) === -->
<div id="proLayout" style="display:none;">
  
  <div style="display:flex; gap:18px;">

    <!-- –õ–ï–í–û–ï –ú–ï–ù–Æ -->
    <div style="
      width:220px;
      background:#0f172a;
      border-radius:14px;
      padding:16px;
      border:1px solid rgba(255,255,255,0.08);
      height:fit-content;
    ">
      <div style="
        font-weight:700;
        font-size:16px;
        margin-bottom:14px;
        color:#dbe6f5;
      ">
        GISMA PRO
      </div>

      <button class="proTabBtn" onclick="openProTab('about')">üìä –û –ø–∞–Ω–µ–ª–∏</button>
      <button class="proTabBtn" onclick="openProTab('data')">üóÇ –î–∞–Ω–Ω—ã–µ</button>
      <button class="proTabBtn" onclick="openProTab('docs')">üìÑ –°–æ–≥–ª–∞—à–µ–Ω–∏–µ</button>
      <button class="proTabBtn" onclick="openProTab('support')">üíé –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
    </div>

    <!-- –ö–û–ù–¢–ï–ù–¢ -->
    <div style="flex:1;">

      <div id="tab-about" class="proTab">
        <div class="section-title">–û –ø–∞–Ω–µ–ª–∏</div>
        <p style="color:#9fb3c8; line-height:1.7;">
          GISMA ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è,
          –∞–Ω–∞–ª–∏–∑–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –æ–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
          PRO –≤–µ—Ä—Å–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª,
          —É–ª—É—á—à–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã.
        </p>
      </div>
      
<div id="dataContent">

    <!-- –í–ï–°–¨ –¢–í–û–ô –°–¢–ê–†–´–ô –ö–û–ù–¢–ï–ù–¢ –ü–ê–ù–ï–õ–ò -->
    <!-- –ø–æ–ª—è, –∫–Ω–æ–ø–∫–∏, –≥–∏—Å–º–∞, –¥–∞–Ω–Ω—ã–µ –∏ —Ç.–¥. -->

</div>
      <div id="tab-data" class="proTab" style="display:none;">
        <div class="section-title">–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</div>
        <p style="color:#9fb3c8;">
          –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å
          –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ –ø–∞–Ω–µ–ª–∏.
        </p>
        <!-- –¢–í–û–Ø –°–¢–ê–†–ê–Ø –ü–ê–ù–ï–õ–¨ –î–ê–ù–ù–´–• –û–°–¢–ê–ù–ï–¢–°–Ø –ù–ò–ñ–ï -->
      </div>

      <div id="tab-docs" class="proTab" style="display:none;">
        <div class="section-title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</div>
        <p style="color:#9fb3c8; line-height:1.7;">
          –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
          –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.
          –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –¥–æ–±–∞–≤–ª—è–µ–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é,
          –µ—ë —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã.
        </p>
      </div>

      <div id="tab-support" class="proTab" style="display:none;">
        <div class="section-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –¥–æ–Ω–∞—Ç</div>
        <p style="color:#9fb3c8; margin-bottom:12px;">
          –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏—é –ø–∞–Ω–µ–ª–∏,
          –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —É–ª—É—á—à–µ–Ω–∏—é –∑–∞—â–∏—Ç—ã —Å–∏—Å—Ç–µ–º—ã.
          –ö—É–ø–∏—Ç—å PRO –≤–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–∞–Ω–µ–ª–∏.
        </p>

        <button onclick="openDonateTG()" class="proActionBtn">
          üí≥ –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ä–µ–∑ Telegram
        </button>
      </div>
<button onclick="openAIBot()" class="proActionBtn">
ü§ñ AI –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (PRO)
</button>
    </div>
  </div>
</div>
</div>
<div class="topbar">
<div>
<div class="title">GISMA</div>
<div class="subtitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å</div>
</div>
<div style="display:flex;gap:10px">
<button class="toggle" onclick="toggleTheme()">Dark / Light</button>
<button class="toggle" onclick="toggleReadonly()">Read Only</button>
</div>
</div>

<div class="panel" id="panel">

<div class="header">
  <!-- –§–æ—Ç–æ 1 -->
  <label class="photo-box">
    <input type="file" accept="image/*" onchange="loadPhoto(event, 1)">
    <div class="photo-placeholder">ADD PHOTO</div>
    <img id="photo1" hidden>
  </label>

  <!-- –§–æ—Ç–æ 2 -->
  <label class="photo-box">
    <input type="file" accept="image/*" onchange="loadPhoto(event, 2)">
    <div class="photo-placeholder">ADD PHOTO</div>
    <img id="photo2" hidden>
  </label>

  <!-- –§–æ—Ç–æ 3 -->
  <label class="photo-box">
    <input type="file" accept="image/*" onchange="loadPhoto(event, 3)">
    <div class="photo-placeholder">ADD PHOTO</div>
    <img id="photo3" hidden>
  </label>

  <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è -->
  <div class="meta">
    <div>–î–∞—Ç–∞: <span id="date"></span></div>
    <div>–í—Ä–µ–º—è: <span id="time"></span></div>
  </div>
</div>

</div>
<div id="mainPanelContent">
  
<div class="section">
<div class="section-title">–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</div>
<div id="fields"></div>
</div>
<div class="controls">
<input id="newLabel" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è">
<input id="newValue" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
<button onclick="addField()">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ</button>
</div>
</div>

<div class="section">
<div class="section-title">–≠–∫—Å–ø–æ—Ä—Ç</div>
<div class="export">
<button onclick="exportTXT()">TXT</button>
<button onclick="exportHTML()">HTML</button>
<button onclick="exportPDF()">PDF</button>
<button onclick="clearPanel()">–û—á–∏—Å—Ç–∏—Ç—å –ø–∞–Ω–µ–ª—å</button>
</div>
</div>

<div class="section">
<div class="section-title">–û –ø–∞–Ω–µ–ª–∏</div>
<div class="about">

<div class="section">
  <div class="section-title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è / –°–æ–≥–ª–∞—à–µ–Ω–∏–µ</div>
  <div class="about">
    <b>–≤–∞–∂–Ω–æ:</b> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.
  </div>
</div>

<div style="
  margin-top:18px;
  background: linear-gradient(145deg, #171f33, #1f2942);
  border: 1px solid rgba(63, 169, 245, 0.25);
  border-radius: 14px;
  padding:16px;
  font-family: 'Inter', sans-serif;
  color:#dbe6f5;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
">

  <div style="font-size:17px; font-weight:700; margin-bottom:6px;">
    üíé –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞
  </div>

  <div style="font-size:13.5px; opacity:0.9; line-height:1.6; margin-bottom:12px;">
    –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑–≤–∏—Ç–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏.
    –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∑–∞—â–∏—Ç—É, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏
    –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –≤ —Å–∏—Å—Ç–µ–º—É.
  </div>

  <div style="font-size:13px; opacity:0.85; margin-bottom:14px;">
    –û–ø–ª–∞—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É.
    –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –∫–∞—Ä—Ç–æ–π ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü—É –ø–∞–Ω–µ–ª–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤.
  </div>

  <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:center;">

    <button onclick="openDonateTG()" style="
      background: linear-gradient(135deg, #3fa9f5, #2563eb);
      border:none;
      color:white;
      padding:10px 18px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      transition:0.2s;
    ">
          üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Telegram
    </button>

       <button onclick="contactOwner()" style="
      background: transparent;
      border:1px solid rgba(255,255,255,0.25);
      color:#cfd9e6;
      padding:10px 18px;
      border-radius:10px;
      font-weight:500;
      cursor:pointer;
    ">
      üë§ –ù–∞–ø–∏—Å–∞—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü—É
    </button>

  </div>

</div>

<b>GISMA ‚Äî Digital Intelligence Interface</b><br><br>

GISMA ‚Äî —ç—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è, —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —É–¥–æ–±–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, —É–ø—Ä–æ—â–∞—è –∞–Ω–∞–ª–∏–∑, –ø—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ü–∞–Ω–µ–ª—å –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö, –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —É–¥–æ–±–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—Ä–µ–¥–µ.

<div class="footer">
<div style="
  font-size:12px;
  color:var(--muted);
  padding:10px 22px;
  border-top:1px solid var(--border);
">
  –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–∞–Ω–µ–ª–∏: <span id="visitCounter">0</span>
</div>

<div class="footer">
  <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
    
    <a href="https://t.me/kramsov" target="_blank" style="
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
      padding:4px 8px;
      border-radius:6px;
      transition:0.2s;
    " onmouseover="this.style.background='rgba(63,169,245,0.12)'" 
       onmouseout="this.style.background='transparent'">
      –í–ª–∞–¥–µ–ª–µ—Ü: @krasmov
    </a>

    <span style="opacity:0.5;">‚Ä¢</span>

    <a href="https://t.me/tgsaphx" target="_blank" style="
      color: var(--accent);
      text-decoration: none;
      font-weight: 500;
      padding:4px 8px;
      border-radius:6px;
      transition:0.2s;
    " onmouseover="this.style.background='rgba(63,169,245,0.12)'" 
       onmouseout="this.style.background='transparent'">
      –ü—Ä–æ–µ–∫—Ç: @tgsaphx
    </a>

    <span style="opacity:0.5;">‚Ä¢</span>

    <a href="https://t.me/kramsov" target="_blank" style="
      color:#22c55e;
      text-decoration:none;
      font-weight:600;
      padding:4px 10px;
      border:1px solid rgba(34,197,94,0.4);
      border-radius:8px;
      transition:0.2s;
    " onmouseover="this.style.background='rgba(34,197,94,0.12)'" 
       onmouseout="this.style.background='transparent'">
      –ü–æ–¥–¥–µ—Ä–∂–∫–∞
    </a>

  </div>

  <div style="opacity:0.6; font-size:12px;">
    GISMA UI ‚Ä¢ secure panel
  </div>
</div>

<!-- –ö—Ä–∞—Å–∏–≤–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
<div id="confirmModal" class="modal">
    <div class="modal-box">
        <h2>–û—á–∏—Å—Ç–∏—Ç—å –ø–∞–Ω–µ–ª—å?</h2>
        <p>–≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—è –∏ —Ñ–æ—Ç–æ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.</p>
        <div class="modal-buttons">
            <button id="cancelClear">–û—Ç–º–µ–Ω–∞</button>
            <button id="confirmClear" class="danger">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>
</div>
</div>

<script>
const panel=document.getElementById("panel");
const { jsPDF } = window.jspdf;

function updateTime(){
const n=new Date();
date.textContent=n.toLocaleDateString("ru-RU");
time.textContent=n.toLocaleTimeString("ru-RU");
}
setInterval(updateTime,1000);updateTime();

function toggleTheme(){
document.body.classList.toggle("light");
}
function toggleReadonly(){
panel.classList.toggle("readonly");
}


function loadPhoto(e, num){
  const img = document.getElementById("photo"+num);
  img.src = URL.createObjectURL(e.target.files[0]);
  img.hidden = false;
  e.target.nextElementSibling.style.display = "none";
}
updateStats();

function addField(){
if(!newLabel.value)return;
const f=document.createElement("div");
f.className="field";
f.draggable=true;
f.innerHTML=`
<div class="label">${newLabel.value}</div>
<div class="value" contenteditable="true">${newValue.value}</div>
<div class="actions">
<span class="action" onclick="this.closest('.field').remove()">‚úñ</span>
</div>`;
addDrag(f);
fields.appendChild(f);
newLabel.value="";newValue.value="";
}

function addDrag(el){
el.addEventListener("dragstart",()=>el.classList.add("dragging"));
el.addEventListener("dragend",()=>el.classList.remove("dragging"));
}

fields.addEventListener("dragover",e=>{
e.preventDefault();
const after=[...fields.querySelectorAll(".field:not(.dragging)")]
.find(el=>e.clientY<=el.getBoundingClientRect().top+el.offsetHeight/2);
fields.insertBefore(document.querySelector(".dragging"),after||null);
});

function exportTXT(){
let t="GISMA EXPORT\n\n";
document.querySelectorAll(".field").forEach(f=>{
t+=f.querySelector(".label").innerText+": "+
f.querySelector(".value").innerText+"\n";
});
download(t,"gisma.txt","text/plain");
}

function exportHTML(){
download(document.documentElement.outerHTML,"gisma.html","text/html");
}

function exportPDF(){
const pdf=new jsPDF();
let y=15;
pdf.text("GISMA EXPORT",10,y); y+=10;
document.querySelectorAll(".field").forEach(f=>{
pdf.text(`${f.querySelector(".label").innerText}: ${f.querySelector(".value").innerText}`,10,y);
y+=8;
});
pdf.save("gisma.pdf");
}

function download(data,name,type){
const a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([data],{type}));
a.download=name;a.click();
}

function updateStats(){
    const fieldsCount = document.querySelectorAll(".field").length;
    const photosCount = document.querySelectorAll(".photo-box img:not([hidden])").length;

    const stats = document.getElementById("stats");
    if(stats){
        stats.textContent = `–ü–æ–ª—è: ${fieldsCount} ‚Ä¢ –§–æ—Ç–æ: ${photosCount}`;
    }
}

/* ===== –û–ß–ò–°–¢–ö–ê –ü–ê–ù–ï–õ–ò (–í–°–¢–ê–í–ò–¢–¨ –°–Æ–î–ê) ===== */
function clearPanel(){
    
    // 1. –£–¥–∞–ª—è–µ–º –í–°–ï –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è (—É —Ç–µ–±—è –æ–Ω–∏ –≤ #fields)
    document.getElementById("fields").innerHTML = "";

    // 2. –û—á–∏—â–∞–µ–º —Ñ–æ—Ç–æ
    const photo = document.getElementById("photo");
    photo.src = "";
    photo.hidden = true;

    // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–¥–ø–∏—Å—å ADD PHOTO
    const placeholder = document.querySelector(".photo-placeholder");
    if(placeholder){
        placeholder.style.display = "flex";
    }

    // 3. –û—á–∏—â–∞–µ–º –∏–Ω–ø—É—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è
    document.getElementById("newLabel").value = "";
    document.getElementById("newValue").value = "";

    // 4. (–µ—Å–ª–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º)
    localStorage.clear();

    alert("–ø–∞–Ω–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞");
}

/* === –õ–Å–ì–ö–ê–Ø –ó–ê–©–ò–¢–ê –ü–ê–ù–ï–õ–ò === */

// –∑–∞–ø—Ä–µ—Ç –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏
document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
});

// –±–ª–æ–∫ F12, Ctrl+Shift+I, Ctrl+U
document.addEventListener("keydown", function(e) {
    if (e.key === "F12") e.preventDefault();
    if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "i") e.preventDefault();
    if (e.ctrlKey && e.key.toLowerCase() === "u") e.preventDefault();
});

/* === –ê–ù–ê–õ–ò–¢–ò–ö–ê –ü–û–°–ï–©–ï–ù–ò–ô === */
(function(){
    let visits = localStorage.getItem("gisma_visits");
    visits = visits ? parseInt(visits) + 1 : 1;
    localStorage.setItem("gisma_visits", visits);

    const counter = document.getElementById("visitCounter");
    if(counter){
        counter.textContent = visits;
    }
})();

/* === –°–ò–°–¢–ï–ú–ê –í–•–û–î–ê –ò –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò === */

const authScreen = document.getElementById("authScreen");
const app = document.getElementById("app");
const authStatus = document.getElementById("authStatus");

function registerUser(){
    const login = document.getElementById("authLogin").value.trim();
    const pass = document.getElementById("authPassword").value.trim();

    if(!login || !pass){
        authStatus.textContent = "–∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∏–∫ –∏ –ø–∞—Ä–æ–ª—å";
        return;
    }

    localStorage.setItem("gisma_user", login);
    localStorage.setItem("gisma_pass", pass);

    authStatus.style.color = "#22c55e";
    authStatus.textContent = "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞, —Ç–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ";
}

/* === –í–•–û–î –° –ü–û–î–î–ï–†–ñ–ö–û–ô –í–õ–ê–î–ï–õ–¨–¶–ê (–ê–î–ú–ò–ù) === */

const MASTER_KEY = "gisma_owner"; // –º–æ–∂–µ—à—å –ø–æ–º–µ–Ω—è—Ç—å –Ω–∞ —Å–≤–æ–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥

function loginUser(){
    const login = document.getElementById("authLogin").value.trim();
    const pass = document.getElementById("authPassword").value.trim();

    const savedLogin = localStorage.getItem("gisma_user");
    const savedPass = localStorage.getItem("gisma_pass");

    /* üî• –°–ö–†–´–¢–´–ô –í–•–û–î –í–õ–ê–î–ï–õ–¨–¶–ê (–ë–ï–ó –ü–ê–†–û–õ–Ø) */
    if(login === MASTER_KEY){
        authScreen.style.display = "none";
        app.style.display = "block";

        // –º–µ—Ç–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
        localStorage.setItem("gisma_role", "owner");

        authStatus.style.color = "#3fa9f5";
        authStatus.textContent = "—Ä–µ–∂–∏–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω";
        return;
    }

    /* üë§ –û–±—ã—á–Ω—ã–π –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
if(login === savedLogin && pass === savedPass){
        authScreen.style.display = "none";
        app.style.display = "block";

        localStorage.setItem("gisma_role", "user");
    } else {
        authStatus.style.color = "#ef4444";
        authStatus.textContent = "–Ω–µ–≤–µ—Ä–Ω—ã–π –Ω–∏–∫ –∏–ª–∏ –ø–∞—Ä–æ–ª—å";
    }
}

/* === –°–ò–°–¢–ï–ú–ê –í–õ–ê–î–ï–õ–¨–¶–ê (–ê–î–ú–ò–ù-–ú–ï–ù–Æ) === */

const OWNER_SECRET_CODE = "kx91_gisma_core_access"; // –ø–æ–º–µ–Ω—è–π –Ω–∞ —Å–≤–æ–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥

function openOwnerLogin(){
    document.getElementById("ownerModal").style.display = "flex";
}

function closeOwnerLogin(){
    document.getElementById("ownerModal").style.display = "none";
    document.getElementById("ownerStatus").textContent = "";
    document.getElementById("ownerCode").value = "";
}

function loginOwner(){
    const code = document.getElementById("ownerCode").value.trim();
    const status = document.getElementById("ownerStatus");

    if(code === OWNER_SECRET_CODE){
        // —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã –≤—Ö–æ–¥–∞
        document.getElementById("authScreen").style.display = "none";
        document.getElementById("ownerModal").style.display = "none";

        // –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å
        document.getElementById("app").style.display = "block";

        // —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–æ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞
        localStorage.setItem("gisma_role", "owner");

    } else {
        status.textContent = "–Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞";
    }
}

/* === –î–û–ü. –ó–ê–©–ò–¢–ê –ü–ê–ù–ï–õ–ò (–õ–û–ì + –ê–í–¢–û–ë–õ–û–ö + –ú–ê–°–¢–ï–†-–ü–ê–†–û–õ–¨) === */

const MASTER_PASSWORD = "kramsov"; // ‚Üê –º–æ–∂–µ—à—å —Å–º–µ–Ω–∏—Ç—å

let inactivityTimer;

/* –õ–û–ì –í–•–û–î–û–í */
function saveLoginLog(user){
    const logs = JSON.parse(localStorage.getItem("gisma_logs") || "[]");
    const time = new Date().toLocaleString();
    logs.push(`–í—Ö–æ–¥: ${user} | ${time}`);
    localStorage.setItem("gisma_logs", JSON.stringify(logs));
}

/* –ü–û–ö–ê–ó –õ–û–ì–û–í (–µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –∫–Ω–æ–ø–∫—É –ø–æ—Ç–æ–º) */
function showLogs(){
    const logs = JSON.parse(localStorage.getItem("gisma_logs") || "[]");
    alert(logs.join("\n") || "–õ–æ–≥–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç");
}

/* –ê–í–¢–û-–ë–õ–û–ö–ò–†–û–í–ö–ê –ß–ï–†–ï–ó 5 –ú–ò–ù–£–¢ */
function resetTimer(){
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
        lockPanel();
    }, 5 * 60 * 1000); // 5 –º–∏–Ω—É—Ç
}

function lockPanel(){
    const app = document.getElementById("app");
    const authScreen = document.getElementById("authScreen");

    if(app){
        app.style.display = "none";
        authScreen.style.display = "flex";
        alert("–ü–∞–Ω–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑-–∑–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏");
    }
}

/* –°–õ–ï–ñ–ï–ù–ò–ï –ó–ê –ê–ö–¢–ò–í–ù–û–°–¢–¨–Æ */
document.addEventListener("mousemove", resetTimer);
document.addEventListener("keydown", resetTimer);
document.addEventListener("click", resetTimer);

/* –ü–ï–†–ï–•–í–ê–¢ –í–•–û–î–ê (—É–ª—É—á—à–µ–Ω–∏–µ —Ç–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã) */
const oldLoginUser = loginUser;
loginUser = function(){
    const login = document.getElementById("authLogin").value.trim();
    const pass = document.getElementById("authPassword").value.trim();

    const savedLogin = localStorage.getItem("gisma_user");
    const savedPass = localStorage.getItem("gisma_pass");

    if(pass === MASTER_PASSWORD){
        document.getElementById("authScreen").style.display = "none";
        document.getElementById("app").style.display = "block";
        saveLoginLog("ADMIN (–º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å)");
        resetTimer();
        return;
    }

    if(login === savedLogin && pass === savedPass){
        document.getElementById("authScreen").style.display = "none";
        document.getElementById("app").style.display = "block";
        saveLoginLog(login);
        resetTimer();
    } else {
        document.getElementById("authStatus").style.color = "#ef4444";
        document.getElementById("authStatus").textContent = "–Ω–µ–≤–µ—Ä–Ω—ã–π –Ω–∏–∫ –∏–ª–∏ –ø–∞—Ä–æ–ª—å";
    }
};

window.addEventListener("beforeunload", function (e) {
    const hasFields = document.querySelectorAll(".field").length > 0;
    if (hasFields) {
        e.preventDefault();
        e.returnValue = "";
    }
});

window.addEventListener("load", () => {
    const role = localStorage.getItem("gisma_role");
    if(role === "owner"){
        console.log("–í—Ö–æ–¥: –í–ª–∞–¥–µ–ª–µ—Ü –ø–∞–Ω–µ–ª–∏");
    }
});

/* === –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï GISMA === */

function savePanelData() {
    const fieldsContainer = document.getElementById("fields");
    if (!fieldsContainer) return;

    localStorage.setItem("gisma_fields", fieldsContainer.innerHTML);

    const photos = document.querySelectorAll(".photo-preview img");
    const photoData = [];
    photos.forEach(img => {
        photoData.push(img.src || "");
    });
    localStorage.setItem("gisma_photos", JSON.stringify(photoData));
}

function loadPanelData() {
    const savedFields = localStorage.getItem("gisma_fields");
    const savedPhotos = localStorage.getItem("gisma_photos");

    if (savedFields && document.getElementById("fields")) {
        document.getElementById("fields").innerHTML = savedFields;
    }

    if (savedPhotos) {
        const photos = JSON.parse(savedPhotos);
        const imgElements = document.querySelectorAll(".photo-preview img");
        imgElements.forEach((img, index) => {
            if (photos[index]) {
                img.src = photos[index];
                img.style.display = "block";
            }
        });
    }
}

/* –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ª—é–±–æ–º –≤–≤–æ–¥–µ */
document.addEventListener("input", savePanelData);
document.addEventListener("change", savePanelData);
window.addEventListener("load", loadPanelData);

/* === –ú–ò–ù–ò –ê–ù–ê–õ–ò–¢–ò–ö–ê === */
function updateAnalytics() {
    let visits = localStorage.getItem("gisma_visits");
    visits = visits ? parseInt(visits) + 1 : 1;
    localStorage.setItem("gisma_visits", visits);

    const box = document.getElementById("analyticsBox");
    if (box) {
        box.textContent = "–ó–∞–≥—Ä—É–∑–æ–∫ –ø–∞–Ω–µ–ª–∏: " + visits;
    }
}

window.addEventListener("load", updateAnalytics);

function openDonateTG(){
    window.open("http://t.me/send?start=IVETGEUWUZSU", "_blank");
}

function contactOwner(){
    // –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π Telegram —é–∑–µ—Ä–Ω–µ–π–º –≤–ª–∞–¥–µ–ª—å—Ü–∞
    window.open("https://t.me/kramsov", "_blank");
}

/* === –õ–ò–¶–ï–ù–ó–ò–û–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê GISMA === */

const VALID_LICENSE_KEYS = [
    "GISMA-PRO-2026",
    "GISMA-ELITE-ACCESS",
    "KRASMOV-PRO-KEY"
];

function checkLicense(){
    const status = document.getElementById("licenseStatus");
    const license = localStorage.getItem("gisma_license");

    if(license && VALID_LICENSE_KEYS.includes(license)){
        localStorage.setItem("gisma_pro","true");

        status.textContent = "PRO –ª–∏—Ü–µ–Ω–∑–∏—è –∞–∫—Ç–∏–≤–Ω–∞ ‚úî";
        status.style.color = "#22c55e";

        unlockProFeatures();
    }
}

function enterLicense(){
    const key = prompt("–í–≤–µ–¥–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–π –∫–ª—é—á:");

    if(!key) return;

    // –∏–º–∏—Ç–∞—Ü–∏—è –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–≤–µ—Ä–∫–∏
    const status = document.getElementById("licenseStatus");
    status.textContent = "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏...";
    status.style.color = "#3fa9f5";

    setTimeout(() => {
        if(VALID_LICENSE_KEYS.includes(key)){
            localStorage.setItem("gisma_license", key);
            localStorage.setItem("gisma_pro","true");
            status.textContent = "PRO –ª–∏—Ü–µ–Ω–∑–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ ‚úî";
            status.style.color = "#22c55e";
            unlockProFeatures();
        } else {
            status.textContent = "–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞";
            status.style.color = "#ef4444";
        }
    }, 1500);
}

function buyPro(){
    alert("–ö—É–ø–∏—Ç—å PRO –≤–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–∞–Ω–µ–ª–∏.");
    window.open("https://t.me/kramsov", "_blank");
}

/* === –î–û–ü –§–£–ù–ö–¶–ò–ò PRO === */
function unlockProFeatures(){

    // 1. –†–∞–∑—Ä–µ—à–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
    const exportSection = document.querySelector(".export");
    if(exportSection){
        const btn = document.createElement("button");
        btn.innerText = "–≠–∫—Å–ø–æ—Ä—Ç JSON (PRO)";
        btn.onclick = exportJSON;
        exportSection.appendChild(btn);
    }

    // 2. –î–æ–±–∞–≤–ª—è–µ–º PRO –±–µ–π–¥–∂
    const title = document.querySelector(".title");
    if(title){
        title.innerHTML += " <span style='color:#22c55e;font-size:14px;'>PRO</span>";
    }
}

function exportJSON(){
    const data = [];
    document.querySelectorAll(".field").forEach(f=>{
        data.push({
            label: f.querySelector(".label").innerText,
            value: f.querySelector(".value").innerText
        });
    });

    const blob = new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "gisma_pro_export.json";
    a.click();
}

window.addEventListener("load", checkLicense);

/* === PRO –ò–ù–¢–ï–†–§–ï–ô–° === */

function enableProInterface(){
    const proLayout = document.getElementById("proLayout");
    const wrapper = document.querySelector(".wrapper");

    if(localStorage.getItem("gisma_pro") === "true"){
        if(proLayout) proLayout.style.display = "block";

        // —Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –±–µ—Å–ø–æ—Ä—è–¥–æ—á–Ω—ã–π –≤–∏–¥ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
        const sections = document.querySelectorAll(".section");
        sections.forEach(sec => sec.style.display = "none");
    }
    openProTab("data");
}

/* === –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô PRO –ò–ù–¢–ï–†–§–ï–ô–° GISMA === */

function enableProInterface(){
    const isPro = localStorage.getItem("gisma_pro") === "true";
    const proLayout = document.getElementById("proLayout");
    const mainContent = document.getElementById("mainPanelContent");

    if(isPro){
        if(proLayout) proLayout.style.display = "block";
        if(mainContent) mainContent.style.display = "none";
        openProTab("about"); // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞
    } else {
        if(proLayout) proLayout.style.display = "none";
        if(mainContent) mainContent.style.display = "block";
    }
}

function openProTab(tab){

    const mainContent = document.getElementById("mainPanelContent");

    // —Å–∫—Ä—ã–≤–∞–µ–º –≤—Å—ë
    document.querySelectorAll(".proTab").forEach(el=>{
        el.style.display = "none";
    });

    // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    const active = document.getElementById("tab-" + tab);
    if(active){
        active.style.display = "block";
    }

    // –õ–û–ì–ò–ö–ê –†–ê–ó–î–ï–õ–û–í
    if(tab === "data"){
        if(mainContent) mainContent.style.display = "block";
    } else {
        if(mainContent) mainContent.style.display = "none";
    }

    // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    document.querySelectorAll(".proTabBtn").forEach(btn=>{
        btn.classList.remove("activeProBtn");
    });

    const clickedBtn = event?.target;
    if(clickedBtn){
        clickedBtn.classList.add("activeProBtn");
    }
}

/* === –í–´–•–û–î –ò–ó PRO === */
function exitProMode(){
    localStorage.removeItem("gisma_pro");
    localStorage.removeItem("gisma_license");
    alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ PRO —Ä–µ–∂–∏–º–∞");
    location.reload();
}

window.addEventListener("load", enableProInterface);

function exitProMode(){
    // —É–¥–∞–ª—è–µ–º –ø—Ä–æ –ª–∏—Ü–µ–Ω–∑–∏—é
    localStorage.removeItem("gisma_pro");
    localStorage.removeItem("gisma_license");

    // —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ PRO –≤–µ—Ä—Å–∏–∏");

    // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞–Ω–µ–ª–∏
    location.reload();
}

function openAIBot(){
    const text = prompt("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∏–º–µ—Ä: –ò–º—è: –ò–≤–∞–Ω, –ì–æ—Ä–æ–¥: –ö–∏–µ–≤)");

    if(!text) return;

        // —Ä–∞–∑–¥–µ–ª—è–µ–º –ø–æ –∑–∞–ø—è—Ç—ã–º
    const pairs = text.split(",");

    pairs.forEach(pair=>{
        const parts = pair.split(":");
        if(parts.length === 2){
            const label = parts[0].trim();
            const value = parts[1].trim();

            if(label && value){
                const f=document.createElement("div");
                f.className="field";
                f.innerHTML=`
                <div class="label">${label}</div>
                <div class="value" contenteditable="true">${value}</div>
                <div class="actions">
                <span class="action" onclick="this.closest('.field').remove()">‚úñ</span>
                </div>`;
                fields.appendChild(f);
            }
        }
    });
}

</script>
</div>
</div>
</body>
</html>
